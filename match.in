#!/bin/sh

. idioms

usage() { die "usage: %s [-EF] PATTERN STRING...\n" "${0##*/}"; }

unset -v GREP_OPTIONS

while getopts :EF arg >/dev/null 2>&1; do
    case "${arg}" in
        E)
            pattern_type=-E
            ;;
        F)
            pattern_type=-F
            ;;
        ?)
            error "unknown argument -- %s\n" "${OPTARG}"
            usage
            ;;

    esac
done
shift $((OPTIND - 1))

[ $# -gt 0 ] || usage

pattern="${1}"; shift

[ "$(printf '%s\n' "$@" | grep "${pattern_type}" -c -v -- "${pattern}")" -eq 0 ] || exit 1

